# Bolt Link（仮称） — 広告を見てSatsを貰おう

# 概要

Bolt Linkはbit.lyのようなリンク短縮サービスとsats払いによる報酬を組み合わせ、ユーザーが広告を見てsatsを得られるようにしたサービスです。

Satsを受け取るには、ユーザーは：

- Diamond Wallet内にすでに入金してチャネルを開設している（費用 3,000 sats）
- そのうえで、特別なリンクにアクセスすることでウォレットアプリが立ち上がり、アプリ内ブラウザで広告先のURLが開きます。ユーザーが広告を閲覧する間に、バックグラウンドでウォレットがインボイスを作成し、自動的に支払いを要求します。

広告主はこの仕組みを活用して少額のSatsを支払うことでライトニングユーザーを自社ウェブサイト等に誘導することができます。

報酬を重複して得る不正行為に対しては、報酬の支払い前にユニークなライトニングチャネルの存在を検証することでコストを上げて対策しています。

## 広告主にとってのメリット：

直接ライトニングネットワークのユーザーに広告を見てもらえます。
ユーザーはライトニングチャネルが必要なため（開設コストがあるため）、広告費をbotなどに過剰に払わずに済みます。

## ユーザーにとってのメリット：

ノンカストディアルなウォレット（Diamond Wallet）にKYC不要で直接少額のSatsを貰うことができます。

## Bolt Linkの現状

Bolt Linkはまだコンセプト実証・テスト段階にあり、外部の広告主からの広告は募集していません
ユーザーはDiamond Walletアプリをインストールして入金することで使うことができます。
Satsがもらえるリンクの大半はDiamond Handsテレグラム内にて配布されています。
広告がユーザーのデバイスに自動的に通知・配信されてくる仕組みではありません。

# 仕組み

Diamond WalletはGreenlightとBreez SDKを使ってクラウド上にユーザー固有のライトニングノードを割り当てつつ、秘密鍵はユーザーのスマホ上にしか存在しないノンカストディアルウォレットです。

ユーザーが「https://ads.diamondhands.technology/c/example」のような特別なリンクをクリックすると、Diamond Walletアプリが立ち上がり、下記のプロセスで広告の配信と報酬の支払いが開始されます。
（アプリがインストールされていない場合は、インストール方法への誘導とQRコードがある画面が表示されます。）

```mermaid
sequenceDiagram
	participant ユーザー(ブラウザ)
	participant ユーザー(アプリ)
	participant Bolt.linkサーバー
	participant 広告主
	広告主 ->> Bolt.linkサーバー: 広告キャンペーンの作成と入金
	ユーザー(ブラウザ) ->> ユーザー(アプリ): リンクを踏んでアプリに遷移
	ユーザー(アプリ) ->> Bolt.linkサーバー: 広告のURLをサーバーから取得
	Bolt.linkサーバー ->> ユーザー(アプリ): 広告予算が残っていれば、広告のURL
	ユーザー(アプリ) ->> 広告主: アプリ内ブラウザで広告を表示
	ユーザー(アプリ) ->> Bolt.linkサーバー: 支払先情報の作成と送信（諸条件チェック）
	ユーザー(アプリ) ->> ユーザー(アプリ): 広告の閲覧
	ユーザー(アプリ) ->> Bolt.linkサーバー: 支払いの要求
	Bolt.linkサーバー ->> ユーザー(アプリ): ユーザーへの支払い（ライトニング経由）
```

リンクにアクセスすると、広告キャンペーンに資金が残っている場合はウォレットが実際の広告URLを取得し、アプリ内ブラウザでユーザーに表示します。
この時点で、ウォレットは支払先情報となるBOLT11インボイスを広告の指定した金額で生成しサーバーに送信します。
サーバーはこのインボイスを元にライトニングチャネルの保有を確認するなどして、ユーザーが利用条件に合致するか検証します。

ユーザーが広告を閲覧すると、ウォレットは先程のインボイスに対する支払いをサーバーに要求し、サーバーはライトニングネットワーク経由で送金を行います。
このように、ユーザーは広告閲覧の対価として少額のSatsを受け取ることができます。

多重請求する不正への対策は、開設にコストのかかるライトニングチャネルを必須にすることで実施しています。
また、現状では更にそのチャネルが特定のノード（LSP）とのものであること、実際の支払いもそのチャネルを経由することを追加の条件として課しているため、利用可能なユーザーはDiamond Walletユーザーに限定されています。

なお、「ワンタイムコード」を利用する広告キャンペーンを作成した場合は、まだチャネルがないユーザー（例えば新規のDiamond Walletユーザー）にも、事前にチャネルを開設することなく利用していただけます。
チャネル開設に必要な3,000 satsも必要なくなるため、新規ユーザーのオンボーディングに役立ちます。

# 将来の展望

以下のものを含め、新機能の追加などを検討しています：

- ユーザーへの広告のプッシュ
- アフィリエイト機能
- アプリ内課金によるチャネル開設（まだsatsを持ってないユーザー向け）
- Greenlightを使っている他のウォレットへの展開

# 先行事例

テレグラムbotの「Lntxbot」にあった「sats4ads」機能は広告閲覧の対価としてユーザーにSatsを支払う先行事例です。ただし、sats4adsではユーザーが個別に文字単価を設定できるマーケットプレイス形式であったり、
広告がプッシュ型であったり、Lntxbotがカストディ型のウォレットであった点などはBolt Linkと異なります。また、Bolt Linkはメール、ツイッター、チャット等で共有しやすい一般的なURLを使用しているため、ユーザーにリーチしやすいです。

Fountain.fmなど一部のポッドキャストアプリは、視聴することでユーザーがSatsを得られたりします。
また、一部のゲームアプリはユーザーが特定の条件を達成するとSatsを得られます。
このようにユーザーにSatsを付与することでアプリのアクティビティや売上が改善できるというデータがあります。

Bolt Linkに似たコンセプトをLNURL-withdrawで実装することも考えられますが、ユーザー体験がより複雑化し、また不正を防ぐことも難しくなります。
ユーザーは開いたウェブサイト上でLNURL文字列を見つける必要が出てきますが、広告主がウェブサイトのコンテンツを自由に編集できない場合はこれは不可能です。
また、LNURLユーザーの大半はカストディ型のウォレットを使っていて、Bolt Linkのライトニングチャネルの存在による不正対策と互換性がありません。
